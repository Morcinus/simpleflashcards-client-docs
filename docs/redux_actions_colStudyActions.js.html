

<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>JSDoc: redux/actions/colStudyActions.js</title>

    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="./build/entry.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Muli:100,400,700|Oswald:300|Inconsolata,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
    <link type="text/css" rel="stylesheet" href="styles/app.min.css">
    <link type="text/css" rel="stylesheet" href="styles/iframe.css">
</head>

<body>
    <div id="stickyNavbarOverlay"></div>
    <div class="top-navbar">
        <div class="container">
            <nav class="navbar" role="navigation" aria-label="main navigation">
                <div class="navbar-brand">
                    
                     
                        <h1 class="navbar-item">Simple Flashcards Dokumentace</h1>
                    
                    <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                        <span aria-hidden="true"></span>
                    </a>
                </div>
                 
                <div class="navbar-menu">
                    <div class="navbar-end">
                    
                        <div class="navbar-item">
                            <a href="https://github.com/Morcinus/SimpleFlashCards" target="_blank">
                                Github
                            </a>
                        </div>
                    
                        <div class="navbar-item">
                            <a href="https://simpleflashcards-4aea0.firebaseapp.com" target="_blank">
                                Aplikace
                            </a>
                        </div>
                    
                    </div>
                </div>
                
            </nav>
        </div>
    </div>
    <div class="container">
        <div class="columns">
            <div class="column is-3" id="sidebarNav">
                <div class="sidebar">
                    <nav>
                        <h2><a href="index.html">Home</a></h2><div class="category"></div><div class="category"><h2>Components</h2><h3>Classes</h3><ul><li><a href="CollectionDecks.html">CollectionDecks</a></li><li><a href="CollectionDialog.html">CollectionDialog</a></li><li><a href="CollectionInfo.html">CollectionInfo</a></li><li><a href="ColTable.html">ColTable</a></li><li><a href="DeckCards.html">DeckCards</a></li><li><a href="DeckInfo.html">DeckInfo</a></li><li><a href="DeckTable.html">DeckTable</a></li><li><a href="Navbar.html">Navbar</a></li><li><a href="PinnedCollections.html">PinnedCollections</a></li><li><a href="PinnedDecks.html">PinnedDecks</a></li><li><a href="UserCollections.html">UserCollections</a></li><li><a href="UserDecks.html">UserDecks</a></li></ul></div><div class="category"><h2>Ostatní</h2><h3>Modules</h3><ul><li><a href="module-store.html">store</a></li><li><a href="module-types.html">types</a></li></ul></div><div class="category"><h2>Pages</h2><h3>Classes</h3><ul><li><a href="collection.html">collection</a></li><li><a href="createDeck.html">createDeck</a></li><li><a href="deck.html">deck</a></li><li><a href="editCollection.html">editCollection</a></li><li><a href="editDeck.html">editDeck</a></li><li><a href="home.html">home</a></li><li><a href="login.html">login</a></li><li><a href="settings.html">settings</a></li><li><a href="signup.html">signup</a></li><li><a href="studyCollection.html">studyCollection</a></li><li><a href="studyDeck.html">studyDeck</a></li><li><a href="userProfile.html">userProfile</a></li></ul></div><div class="category"><h2>ReduxActions</h2><h3>Modules</h3><ul><li><a href="module-colStudyActions.html">colStudyActions</a></li><li><a href="module-colUiActions.html">colUiActions</a></li><li><a href="module-createDeckActions.html">createDeckActions</a></li><li><a href="module-deckStudyActions.html">deckStudyActions</a></li><li><a href="module-deckUiActions.html">deckUiActions</a></li><li><a href="module-editColActions.html">editColActions</a></li><li><a href="module-editDeckActions.html">editDeckActions</a></li><li><a href="module-uiStatusActions.html">uiStatusActions</a></li><li><a href="module-userActions.html">userActions</a></li></ul></div><div class="category"><h2>ReduxReducers</h2><h3>Modules</h3><ul><li><a href="module-colStudyReducer.html">colStudyReducer</a></li><li><a href="module-colUiReducer.html">colUiReducer</a></li><li><a href="module-createDeckReducer.html">createDeckReducer</a></li><li><a href="module-deckStudyReducer.html">deckStudyReducer</a></li><li><a href="module-deckUiReducer.html">deckUiReducer</a></li><li><a href="module-editColReducer.html">editColReducer</a></li><li><a href="module-editDeckReducer.html">editDeckReducer</a></li><li><a href="module-uiStatusReducer.html">uiStatusReducer</a></li><li><a href="module-userReducer.html">userReducer</a></li></ul></div><div class="category"><h2>util</h2><h3>Modules</h3><ul><li><a href="module-AuthRoute.html">AuthRoute</a></li><li><a href="module-functions.html">functions</a></li><li><a href="module-other.html">other</a></li><li><a href="module-theme.html">theme</a></li></ul></div>
                    </nav>
                </div>
            </div>
            <div class="column is-9-desktop">
                <div class="content" id="main-content-wrapper">
                    <header class="page-title">
                        <p>Source</p>
                        <h1>redux/actions/colStudyActions.js</h1>
                    </header>
                    
                    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { SET_STUDY_COLLECTION, CLEAR_STUDY_COLLECTION, SET_STATUS_BUSY, SET_STATUS_ERROR, SET_STATUS_SUCCESS } from "../types";
import axios from "axios";

/**
 * @category ReduxActions
 * @module colStudyActions
 * @description Zde jsou funkce, které komunikují se serverem ohledně studování dané kolekce a vyvolávají změny v [colStudyReduceru]{@link module:colStudyReducer} a [uiStatusReduceru]{@link module:uiStatusReducer}.
 */

/**
 * @function getColLearnCards
 * @description Získá ze serveru data kolekce s kartami, které se uživatel ještě neučil.
 * @param {string} colId - ID dané kolekce
 * @async
 */
export const getColLearnCards = colId => dispatch => {
  dispatch({ type: SET_STATUS_BUSY });
  axios
    .get(`/getColUnknownCards/${colId}`)
    .then(res => {
      dispatch({
        type: SET_STUDY_COLLECTION,
        payload: unpackCardsFromArrays(res.data.cardArray)
      });
      dispatch({ type: SET_STATUS_SUCCESS });
      console.log("SUCCESS");
    })
    .catch(err => {
      console.error("Error:", err.response.data.errorCode);
      dispatch({ type: SET_STATUS_ERROR, payload: err.response.data.errorCode });
    });
};

/**
 * @function getColCardsToLearnAndReview
 * @description Získá ze serveru data kolekce s kartami, které se uživatel ještě neučil ale i s kartami, které by si měl uživatel zopakovat.
 * @param {string} colId - ID dané kolekce
 * @async
 */
export const getColCardsToLearnAndReview = colId => dispatch => {
  dispatch({ type: SET_STATUS_BUSY });
  axios
    .get(`/getColCardsToLearnAndReview/${colId}`)
    .then(res => {
      dispatch({
        type: SET_STUDY_COLLECTION,
        payload: unpackCardsFromArrays(res.data.cardArray)
      });
      dispatch({ type: SET_STATUS_SUCCESS });
      console.log("SUCCESS");
    })
    .catch(err => {
      console.error("Error:", err.response.data.errorCode);
      dispatch({ type: SET_STATUS_ERROR, payload: err.response.data.errorCode });
    });
};

/**
 * @function getColReviewCards
 * @description Získá ze serveru data kolekce s kartami, které by si měl uživatel zopakovat.
 * @param {string} colId - ID dané kolekce
 * @async
 */
export const getColReviewCards = colId => dispatch => {
  dispatch({ type: SET_STATUS_BUSY });
  axios
    .get(`/getColCardsToReview/${colId}`)
    .then(res => {
      dispatch({
        type: SET_STUDY_COLLECTION,
        payload: unpackCardsFromArrays(res.data.cardArray)
      });
      dispatch({ type: SET_STATUS_SUCCESS });
      console.log("SUCCESS");
    })
    .catch(err => {
      console.error("Error:", err.response.data.errorCode);
      dispatch({ type: SET_STATUS_ERROR, payload: err.response.data.errorCode });
    });
};

/**
 * @function pushCollectionProgress
 * @description Nahraje na server pole karet s informacemi o tom, jak se změnil pokrok uživatele u každé karty.
 * @param {Array&lt;Object>} colProgressCards - Pole karet se zaznamenaným pokrokem uživatele u každé z nich.
 * @async
 */
export const pushCollectionProgress = colProgressCards => dispatch => {
  dispatch({ type: SET_STATUS_BUSY });

  colProgressCards = groupIntoArrays(colProgressCards);
  let pushData = {
    cardArray: colProgressCards
  };

  axios
    .post(`/setColCardsProgress`, pushData)
    .then(() => {
      dispatch({ type: CLEAR_STUDY_COLLECTION });
      dispatch({ type: SET_STATUS_SUCCESS });
    })
    .catch(err => {
      console.error("Error:", err.response.data.errorCode);
      dispatch({ type: SET_STATUS_ERROR, payload: err.response.data.errorCode });
    });
};

/**
 * @function clearStudyCollection
 * @description Vymaže studovanou kolekci z reduceru.
 */
export const clearStudyCollection = () => dispatch => {
  dispatch({ type: CLEAR_STUDY_COLLECTION });
};

/**
 * @function unpackCardsFromArrays
 * @description "Rozbalí" pole s balíčkama karet. Tzn. každé kartě přiřadí ID balíčku, ve kterém je zařazena a všechny karty uloží do jednoho pole.
 * @returns {Array&lt;Object>} - Vrací pole s kartami, kde má každá karta přiřazený ID balíčku, ze kterého pochází.
 */
function unpackCardsFromArrays(deckArray) {
  let cardDeck = [];
  let deckIds = Object.keys(deckArray);

  for (let i = 0; i &lt; deckIds.length; i++) {
    let deck = deckArray[deckIds[i]];
    deck.forEach(card => {
      card.deckId = deckIds[i];
      cardDeck.push(card);
    });
  }

  return cardDeck;
}

/**
 * @function groupIntoArrays
 * @description Seskupí karty na základě ID balíčku, ze kterého pochází. Tyto skupiny jsou pak pole, která se nazývají podle ID daných balíčků. Každé kartě je pak smazána hodnota deckId, protože je určena názvem pole, ve kterém se karta nachází.
 * @returns {Object} - Objekt, ve kterém jsou uloženy všechny karty, které jsou seskupené do polí podle ID balíčků, ze kterých pochází.
 */
function groupIntoArrays(cards) {
  let deckArrays = {};
  cards.forEach(card => {
    let deckId = card.deckId;

    // Check if the deckId is in decks already
    if (deckArrays.hasOwnProperty(deckId)) {
      // Push card to the existing deck array
      delete card.deckId;
      deckArrays[deckId].push(card);
    } else {
      // Create a new deck array
      delete card.deckId;
      deckArrays[deckId] = [card];
    }
  });
  return deckArrays;
}
</code></pre>
        </article>
    </section>




                </div>
            </div>
        </div>
    </div>


<footer class="footer">
    <div class="content has-text-centered">
        <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Wed Feb 26 2020 17:20:29 GMT+0100 (GMT+01:00)</p>
        <p class="sidebar-created-by">
            <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
            <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
        </p>
    </div>
</footer>


<script src="scripts/app.min.js"></script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
